% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/shape_plot.R
\name{shape_plot}
\alias{shape_plot}
\title{Generate a Customizable Scatter Plot with Hulls and Contours}
\usage{
shape_plot(
  data,
  x_col,
  y_col,
  group_col = NULL,
  group_vals = NULL,
  styling = list(),
  features = list(),
  labels = list(),
  export_options = list(),
  interactive = FALSE,
  pca_model = NULL,
  verbose = TRUE
)
}
\arguments{
\item{data}{A data frame containing the data to be plotted.}

\item{x_col}{Character string specifying the x-axis column name.}

\item{y_col}{Character string specifying the y-axis column name.}

\item{group_col}{Optional character string specifying the grouping column name.}

\item{group_vals}{Optional vector specifying which group values to display.
If NULL, all unique values in group_col are used.}

\item{styling}{List containing styling options. See Details for available options.}

\item{features}{List containing feature options (hulls, contours, shapes). 
See Details for available options.}

\item{labels}{List containing label options (title, axis labels).}

\item{export_options}{List containing export options. See Details for available options.}

\item{interactive}{Logical indicating whether to enable interactive plotly mode. Default: FALSE.
When TRUE, returns a plotly object with hover events. Requires plotly package.}

\item{pca_model}{Optional PCA model list for interactive reconstruction. Only used when interactive = TRUE.
If provided, enables real-time shape reconstruction on hover. Can be created with extract_pca_model().}

\item{verbose}{Logical indicating whether to print progress messages. Default: TRUE.}
}
\value{
A ggplot2 object (default) or plotly object (when interactive = TRUE).
}
\description{
Creates a highly customizable scatter plot with optional convex hulls, 
contours, and shape overlays. Supports grouping, multiple styling options,
and various export formats.
}
\details{
The `styling` parameter accepts a list with the following options:
\describe{
  \item{plot_style}{Style theme: "Haug", "inverted_Haug", "publication" (default: "Haug")}
  \item{point}{List with point styling (color, fill, shape, size)}
  \item{text}{List with text styling (title_size, label_size, tick_size)}
  \item{axis}{List with axis styling (linewidth, tick_length, tick_margin, central_axes, aspect)}

Aspect options:
- "auto" (default): no fixed aspect unless shapes are drawn, then 1:1
- "free": never fix aspect (let ggplot scale axes independently)
- "1:1" or "2:1": lock aspect using coord_fixed (interpreted as width:height)
}

The `features` parameter accepts a list with the following options:
\describe{
  \item{hulls}{List with hull options (show, groups, fill, color, alpha, linetype)}
  \item{contours}{List with contour options (show, groups, colors, linewidth)}
  \item{shapes}{List with shape options (show, groups, size, shift, adjustments)}
}

The `export_options` parameter accepts a list with the following options:
\describe{
  \item{export}{Logical, whether to export the plot (default: FALSE)}
  \item{filename}{Base filename without extension}
  \item{path}{Optional output directory (if NULL, uses working directory)}
  \item{format}{Output format: "rds", "svg", "tiff", or "png"}
  \item{width}{Width in inches (optional for SVG, required for TIFF/PNG, ignored for RDS)}
  \item{height}{Height in inches (optional for SVG, required for TIFF/PNG, ignored for RDS)}
  \item{dpi}{Resolution in dots per inch for raster formats only (default: 300)}
}
Notes on export formats:
- RDS: Saves the ggplot object for later editing in R
- SVG: Vector format with base dimensions (scalable without quality loss)
- TIFF/PNG: Raster formats requiring width, height, and DPI specifications

When \code{interactive = TRUE}, the plot is converted to plotly for interactive exploration.
If \code{pca_model} is also provided, hovering over the morphospace will show:
- For data points: ID and existing shape (if available in data)
- For empty space: Reconstructed hypothetical shape at those PC coordinates
}
\examples{
# Basic scatter plot
test_data <- data.frame(
  PC1 = rnorm(100), PC2 = rnorm(100),
  species = sample(c("A", "B", "C"), 100, replace = TRUE)
)

# Simple plot
p1 <- shape_plot(test_data, x_col = "PC1", y_col = "PC2")

# Grouped plot with hulls
p2 <- shape_plot(
  data = test_data,
  x_col = "PC1", y_col = "PC2", group_col = "species",
  features = list(hulls = list(show = TRUE))
)

# Advanced customization
p3 <- shape_plot(
  data = test_data,
  x_col = "PC1", y_col = "PC2", group_col = "species",
  styling = list(
    plot_style = "publication",
    point = list(size = 3, shape = 16),
    text = list(title_size = 20)
  ),
  features = list(
    hulls = list(show = TRUE, alpha = 0.3),
    contours = list(show = TRUE)
  ),
  labels = list(
    title = "PCA Analysis",
    x_label = "First Principal Component",
    y_label = "Second Principal Component"
  )
)

}
